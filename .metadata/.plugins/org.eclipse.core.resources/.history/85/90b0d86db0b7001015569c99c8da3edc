package com.mycompany.a2.commands;

import com.codename1.ui.Command;
import com.codename1.ui.Dialog;
import com.codename1.ui.TextField;
import com.codename1.ui.events.ActionEvent;
import com.mycompany.a1.GameWorld;

public class CollideWithFlagCommand extends Command {
	
    private GameWorld gw;

    public CollideWithFlagCommand(GameWorld gw) {
        super("Collide with Flag"); 
        this.gw = gw;
    }

    @Override
    public void actionPerformed(ActionEvent evt) {
        
        // 									("Label", "Hint", size, constraint)
        TextField flagNumField = new TextField("", "1", 1, TextField.NUMERIC);

        // Create commands for the dialog buttons
        Command okCommand = new Command("Ok");
        Command cancelCommand = new Command("Cancel");

        // Show a dialog with the text field and buttons
        Command result = Dialog.show("Enter Flag Number", flagNumField, okCommand, cancelCommand);

        // Process the result only if the user pressed "Ok"
        if (result == okCommand) {
            String inputText = flagNumField.getText();
            try {
                // Try to parse the input text to an integer
                int flagNum = Integer.parseInt(inputText);

                // Check if the number is in a valid range (e.g., 1-9)
                if (flagNum >= 1 && flagNum <= 9) {
                    // Call the GameWorld method with the valid number
                    //gw.collideWithFlag(flagNum);
                	gw.pretendFlagCollision(flagNum);
                	
                    System.out.println("Collide with Flag command invoked for flag: " + flagNum);
                } else {
                    // Show an error for invalid range
                    Dialog.show("Error", "Please enter a flag number between 1 and 9.", "Ok", null);
                }
            } catch (NumberFormatException e) {
                // Show an error if the input was not a valid number
                System.out.println("Invalid input for flag number: " + inputText);
                Dialog.show("Error", "Invalid input. Please enter a number.", "Ok", null);
            }
        }
    }
}
